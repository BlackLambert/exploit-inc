
using System;
using UnityEngine;
using Zenject;

namespace SBaier.ExploitInc
{
	public class InfoBoxFactory : MonoBehaviour
	{
		private PrefabFactory _prefabFactory;
		

		[SerializeField]
		private ResourceContainerInfoInstaller _resourceContainerInfoPrefab = null;
		[SerializeField]
		private ResourceExploitBuildingInfoInstaller _resourceExploitBuildingInfoPrefab = null;
		[SerializeField]
		private WareRefinementBuildingInfoInstaller _wareRefinementBuildingInfoPrefab = null;
		[SerializeField]
		private DeliveryContainerInfoInstaller _deliveryContainerInfoPrefab = null;

		[Inject]
		private void Construct(PrefabFactory prefabFactory)
		{
			_prefabFactory = prefabFactory;
		}

		public InfoBox Create(InfoBoxParameter parameter)
		{
			if (parameter is ResourceContainerInfoParameter)
				return createResourceContainerInfo(parameter as ResourceContainerInfoParameter);
			if(parameter is ResourceExploitBuildingInfoParameter)
				return createResourceExploitBuildingInfo(parameter as ResourceExploitBuildingInfoParameter);
			if (parameter is WareRefinementBuildingInfoParameter)
				return createWareRefinementBuildingInfo(parameter as WareRefinementBuildingInfoParameter);
			if (parameter is DeliveryContainerInfoParameter)
				return createDeliveryContainerInfo(parameter as DeliveryContainerInfoParameter);
			throw new NotImplementedException();
		}

		private InfoBox createResourceContainerInfo(ResourceContainerInfoParameter parameter)
		{
			PrefabFactory.Parameter[] parameters = new PrefabFactory.Parameter[] { new PrefabFactory.Parameter(parameter), new PrefabFactory.Parameter(parameter, typeof(InfoBoxParameter)) };
			return _prefabFactory.Create(_resourceContainerInfoPrefab, parameters).InfoBox;
		}

		private InfoBox createResourceExploitBuildingInfo(ResourceExploitBuildingInfoParameter parameter)
		{
			PrefabFactory.Parameter[] parameters = new PrefabFactory.Parameter[] { new PrefabFactory.Parameter(parameter), new PrefabFactory.Parameter(parameter, typeof(InfoBoxParameter)) };
			return _prefabFactory.Create(_resourceExploitBuildingInfoPrefab, parameters).InfoBox;
		}

		private InfoBox createWareRefinementBuildingInfo(WareRefinementBuildingInfoParameter parameter)
		{
			PrefabFactory.Parameter[] parameters = new PrefabFactory.Parameter[] { new PrefabFactory.Parameter(parameter), new PrefabFactory.Parameter(parameter, typeof(InfoBoxParameter)) };
			return _prefabFactory.Create(_wareRefinementBuildingInfoPrefab, parameters).InfoBox;
		}

		private InfoBox createDeliveryContainerInfo(DeliveryContainerInfoParameter parameter)
		{
			PrefabFactory.Parameter[] parameters = new PrefabFactory.Parameter[] { new PrefabFactory.Parameter(parameter), new PrefabFactory.Parameter(parameter, typeof(InfoBoxParameter)) };
			return _prefabFactory.Create(_deliveryContainerInfoPrefab, parameters).InfoBox;
		}
	}
}