using UnityEngine;
using Zenject;

namespace SBaier.ExploitInc
{
	public class PlanetInteractionMenuElementsCreator : MonoBehaviour
	{
		private PrefabFactory _prefabFactory;
		private InteractionMenu _menu;


		[Inject]
		private void Construct(PrefabFactory prefabFactory,
			InteractionMenu menu)
		{
			_prefabFactory = prefabFactory;
			_menu = menu;

			createElements();
		}

		private void createElements()
		{
			foreach (InteractionMenuElementParameters parameter in _menu.Parameters.Elements)
				addElement(parameter);
		}

		private void addElement(InteractionMenuElementParameters parameters)
		{
			InteractionMenuElement element = createElement(parameters);
			_menu.AddElement(element);
		}

		private InteractionMenuElement createElement(InteractionMenuElementParameters parameters)
		{
			return _prefabFactory.Create(parameters.Prefab, new PrefabFactory.Parameter[] { });
		}
	}
}