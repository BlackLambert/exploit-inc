using System;
using UnityEngine;
using UnityEngine.UI;

namespace SBaier.ExploitInc
{
	public class DroneActivityProgressDisplay : MonoBehaviour
	{
		[SerializeField]
		private Image _progressImage = null;
		[SerializeField]
		private Transform _base = null;
		private float _duration = 0;

		private float _durationProgress = 0;

		public void SetDuration(float duration)
		{
			_duration = duration;
			_durationProgress = 0;
		}

		protected virtual void Start()
		{
			Hide();
		}


		protected virtual void OnEnable()
		{
			updateView();
		}

		protected virtual void Update()
		{
			_durationProgress += Time.deltaTime;
			updateView();
		}


		private void updateView()
		{
			if (_duration <= 0)
				return;
			_progressImage.fillAmount = Mathf.Clamp01(_durationProgress / _duration);
		}

		public void Show(float duration)
		{
			if (duration < 0)
				throw new ArgumentException();
			_duration = duration;
			_durationProgress = 0;
			_base.gameObject.SetActive(true);
		}

		public void Hide()
		{
			_base.gameObject.SetActive(false);
		}
	}
}