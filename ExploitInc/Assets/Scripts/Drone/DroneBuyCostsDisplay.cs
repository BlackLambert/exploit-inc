
using Zenject;

namespace SBaier.ExploitInc
{

	public class DroneBuyCostsDisplay : CostsDisplay
	{
		private DroneConfig _config;
		private DroneHost _host;

		protected override double Costs => _config.GetBuyCostsOf(_host.ActiveCount);

		[Inject]
		private void Construct(DroneConfig config,
			DroneHost host)
		{
			_config = config;
			_host = host;
		}

		protected override void Start()
		{
			_host.OnActiveDroneAdded += onDronesChanged;
			_host.OnActiveDroneRemoved += onDronesChanged;
			base.Start();
		}

		protected override void OnDestroy()
		{
			_host.OnActiveDroneAdded -= onDronesChanged;
			_host.OnActiveDroneRemoved -= onDronesChanged;
			base.OnDestroy();
		}

		private void onDronesChanged(Drone drone)
		{
			updateDisplay();
		}
	}
}