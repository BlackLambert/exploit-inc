using System;
using UnityEngine;

namespace SBaier.ExploitInc
{
	public class Ticker : MonoBehaviour
	{
		[SerializeField]
		private float _secondsPerTick = 10;

		private float _seconds = 0;
		public float NormalizedProgress => _seconds / _secondsPerTick;
		public event Action OnTick;

		public bool Ticking { get; private set; } = true;


		protected virtual void Update()
		{
			if (!Ticking)
				return;
			_seconds += Time.deltaTime;

			while (_seconds >= _secondsPerTick)
			{
				_seconds -= _secondsPerTick;
				OnTick?.Invoke();
			}
		}

		public void StartTicking()
		{
			Ticking = true;
		}

		public void StopTicking()
		{
			Ticking = false;
		}
	}
}