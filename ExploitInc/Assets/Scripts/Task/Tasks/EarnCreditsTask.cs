using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

namespace SBaier.ExploitInc
{
	public class EarnCreditsTask : Task
	{
		public double CreditsToEarn { get; private set; }
		public override event Action OnProgressChanged;
		public override event Action OnFailedProgressChanged;

		private double _earnedCredits = 0;
		public double EarnedCredits
		{
			get => _earnedCredits;
			set
			{
				_earnedCredits = value;
				OnProgressChanged?.Invoke();
				if (Progress == 1)
					IsFullfilled = true;
			}
		}

		public override float Progress => Mathf.Clamp01((float)(EarnedCredits/CreditsToEarn));

		public override string ProgressText => $"{EarnedCredits} / {CreditsToEarn} c";

		public override float FailedProgress => 0;

		public EarnCreditsTask(EarnCreditsTaskConfig config): base(false)
		{
			CreditsToEarn = config.CreditsToEarn;
		}
	}
}