using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

namespace SBaier.ExploitInc
{
	public class HaveCreditsTask : Task
	{
		public double CreditsToHave { get; private set; }
		public override event Action OnProgressChanged;
		public override event Action OnFailedProgressChanged;

		private double _currentCredits = 0;
		public double CurrentCredits
		{
			get => _currentCredits;
			set
			{
				_currentCredits = value;
				OnProgressChanged?.Invoke();
				if (Progress == 1)
					IsFullfilled = true;
			}
		}

		public override float Progress => Mathf.Clamp01((float)(CurrentCredits / CreditsToHave));

		public override string ProgressText => $"{CurrentCredits} / {CreditsToHave} c";

		public override float FailedProgress => 0;

		public HaveCreditsTask(HaveCreditsTaskConfig config) : base(false)
		{
			CreditsToHave = config.CreditsToHave;
		}
	}
}