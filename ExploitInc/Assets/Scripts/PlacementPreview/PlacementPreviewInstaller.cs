using UnityEngine;
using Zenject;

namespace SBaier.ExploitInc
{
	public class PlacementPreviewInstaller : MonoInstaller
	{
		[Inject]
		private PlacementPreviewParameter _parameter = null;

		[SerializeField]
		private Transform _objectHook = null;
		[SerializeField]
		private PlacementPreview _placementPreview = null;
		public PlacementPreview PlacementPreview => _placementPreview;

		public override void InstallBindings()
		{
			Container.Bind(typeof(Placeable)).To<Placeable>().FromInstance(_parameter.PreviewObject.Placeable).AsSingle();
			Container.Bind(typeof(PlacementPreviewParameter)).To<PlacementPreviewParameter>().FromInstance(_parameter).AsSingle();
			Container.Bind(typeof(PlacementPreview)).To<PlacementPreview>().FromInstance(_placementPreview).AsSingle();
			Container.Bind(typeof(PlacementPreviewObject)).To<PlacementPreviewObject>().FromInstance(_parameter.PreviewObject).AsSingle();
			hookPlaceable();
		}

		private void hookPlaceable()
		{
			_parameter.PreviewObject.Base.SetParent(_objectHook, false);
		}
	}
}