using System;
using UnityEngine;
using Zenject;

namespace SBaier.ExploitInc
{

    public class WorldGeneratorInstaller : MonoInstaller
    {

        [SerializeField]
        private string _seedString = "Gerätetalk";
        [SerializeField]
        private bool _randomSeed = false;
        [SerializeField]
        private PlanetGenerator _planetGenerator = null;

        public override void InstallBindings()
        {
            int seed = _randomSeed ? (new System.Random()).Next(0,10000) : _seedString.GetHashCode();
            Container.Bind<Seed>().To<Seed>().AsTransient().WithArguments(seed);
            Container.Bind<PlanetGenerator>().To<PlanetGenerator>().FromComponentInNewPrefab(_planetGenerator).AsSingle().NonLazy();
            Container.Bind<NoiseStepFactory>().To<NoiseStepFactory>().AsSingle();
            Container.Bind<PerlinNoise>().To<PerlinNoise>().AsTransient();
            Container.Bind<LagueNoise>().To<LagueNoise>().AsTransient();
            Container.Bind<PrefabFactory>().To<PrefabFactory>().AsSingle();
        }
    }
}