
using UnityEngine;

namespace SBaier.ExploitInc
{
	public class SetMissionObjectBlockedOnBlock : MonoBehaviour
	{
		[SerializeField]
		private Blockable _blockable = null;
		[SerializeField]
		private MissionObjectStateMachine _stateMachine = null;

		protected virtual void Start()
		{
			_blockable.OnBlockedChanged += onBlickedChanged;
			if (_blockable.Blocked)
				_stateMachine.Add(this, MissionObjectState.NegativeHighlighted);
		}

		protected virtual void OnDestory()
		{
			_blockable.OnBlockedChanged -= onBlickedChanged;
			if (_blockable.Blocked)
				_stateMachine.Remove(this, MissionObjectState.NegativeHighlighted);
		}

		private void onBlickedChanged()
		{
			if (_blockable.Blocked)
				_stateMachine.Add(this, MissionObjectState.NegativeHighlighted);
			else
				_stateMachine.Remove(this, MissionObjectState.NegativeHighlighted);
		}
	}
}