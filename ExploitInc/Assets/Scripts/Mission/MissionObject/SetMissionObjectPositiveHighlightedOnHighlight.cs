
using UnityEngine;

namespace SBaier.ExploitInc
{
	public class SetMissionObjectPositiveHighlightedOnHighlight : MonoBehaviour
	{
		[SerializeField]
		private PositiveHighlightable _highlightable = null;
		[SerializeField]
		private MissionObjectStateMachine _stateMachine = null;

		protected virtual void Start()
		{
			_highlightable.OnHighlightedChanged += onHighlightedChanged;
			if (_highlightable.Highlighted)
				_stateMachine.Add(this, MissionObjectState.PositiveHighlighted);
		}

		protected virtual void OnDestory()
		{
			_highlightable.OnHighlightedChanged -= onHighlightedChanged;
			if (_highlightable.Highlighted)
				_stateMachine.Remove(this, MissionObjectState.PositiveHighlighted);
		}

		private void onHighlightedChanged()
		{
			if (_highlightable.Highlighted)
				_stateMachine.Add(this, MissionObjectState.PositiveHighlighted);
			else
				_stateMachine.Remove(this, MissionObjectState.PositiveHighlighted);
		}
	}

}